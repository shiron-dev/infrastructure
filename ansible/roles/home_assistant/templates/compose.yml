version: "3"
services:
  homeassistant:
    container_name: homeassistant
    image: "ghcr.io/home-assistant/home-assistant:2025.10.3@sha256:22376034bddcb952cfd3f3b4101b932b5a561f050acccd16ef879e88c7ff8233"
    volumes:
      # kics-scan ignore-line
      - /var/home-assistant/config:/config:rw
      # kics-scan ignore-line
      - /etc/localtime:/etc/localtime:ro
      # kics-scan ignore-line
      - /run/dbus:/run/dbus:ro
    restart: unless-stopped
    privileged: false
    network_mode: bridge
    ports:
      - "127.0.0.1:8123:8123"
    security_opt:
      - no-new-privileges:true
    cap_drop:
      - ALL
    # kics-scan ignore-line
    cap_add:
      - NET_ADMIN
      - SYS_ADMIN
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 2G
        reservations:
          cpus: '0.5'
          memory: 512M
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8123"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
