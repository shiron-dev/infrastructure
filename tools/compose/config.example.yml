# cmt (Compose Manage Tool) configuration
#
# JSON Schema: run `cmt schema cmt` to generate

basePath: ../compose   # relative to this config file's directory

defaults:
  remotePath: /opt/compose
  postSyncCommand: docker compose up -d
  composeAction: up              # up|down|ignore (default: up)

hosts:
  - name: server1
    host: 192.168.1.10
    user: deploy
    sshAgent: true
    # sshKeyPath: ~/.ssh/id_ed25519.pub   # for agent key identification

  - name: server2
    host: 192.168.1.11
    port: 2222
    user: deploy
    sshKeyPath: ~/.ssh/id_ed25519
    sshAgent: true

# beforeApplyHooks:
#   beforePlan:                            # runs before plan output
#     command: ./scripts/prepare-context.sh
#   beforeApplyPrompt:                     # runs after plan output, before user confirmation
#     command: ./scripts/check-policy.sh
#   beforeApply:                           # runs after user confirmation, before actual apply
#     command: ./scripts/final-gate.sh
